<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy New Year!</title>
    <style>
        body {
            text-align: center;
            font-family: 'Arial', sans-serif;
            background-color: #000;
            color: #fff;
            margin: 0;
            padding: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            position: relative;
            z-index: 10;
        }

        h1 {
            font-size: 3.5rem;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
            margin: 30px 0;
            animation: textGlow 3s infinite;
        }

        @keyframes textGlow {
            0% { color: #ff0000; text-shadow: 0 0 10px rgba(255, 0, 0, 0.7); }
            16.666% { color: #ff9900; text-shadow: 0 0 10px rgba(255, 153, 0, 0.7); }
            33.333% { color: #ffcc00; text-shadow: 0 0 10px rgba(255, 204, 0, 0.7); }
            50% { color: #33cc33; text-shadow: 0 0 10px rgba(51, 204, 51, 0.7); }
            66.666% { color: #3399ff; text-shadow: 0 0 10px rgba(51, 153, 255, 0.7); }
            83.333% { color: #cc66ff; text-shadow: 0 0 10px rgba(204, 102, 255, 0.7); }
            100% { color: #ff0000; text-shadow: 0 0 10px rgba(255, 0, 0, 0.7); }
        }

        #countdown {
            font-size: 2rem;
            margin: 20px 0;
        }

        #fireworks-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        .button {
            padding: 12px 25px;
            font-size: 18px;
            margin: 15px;
            cursor: pointer;
            background-color: #4285f4;
            color: #fff;
            border: none;
            border-radius: 30px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(66, 133, 244, 0.4);
        }
        
        .button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(66, 133, 244, 0.6);
            background-color: #5294ff;
        }
        
        .button:active {
            transform: translateY(1px);
        }

        #nsfw-button {
            font-size: 14px;
            padding: 8px 16px;
            background-color: #ff4081;
            box-shadow: 0 5px 15px rgba(255, 64, 129, 0.4);
        }
        
        #nsfw-button:hover {
            background-color: #ff679a;
            box-shadow: 0 8px 20px rgba(255, 64, 129, 0.6);
        }

        .button-group {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }

        #volume-control {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px 0;
            gap: 10px;
        }

        #volume-slider {
            width: 150px;
        }

        #youtube-player {
            display: none;
            margin: 20px auto;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            #youtube-player iframe {
                width: 90vw;
                height: 50.625vw; /* 16:9 ratio */
            }
        }
    </style>
</head>
<body>
    <canvas id="fireworks-canvas"></canvas>
    
    <div class="container">
    <h1>HAPPY NEW YEAR EVERYONE!!!</h1>
    
        <div id="countdown"></div>
        
        <div class="button-group">
            <button class="button" id="start-button" onclick="startFireworks()">LAUNCH FIREWORKS</button>
            <button class="button" id="nsfw-button" onclick="openNSFWLink()">PRESS = TRUST</button>
        </div>

        <div id="volume-control">
            <label for="volume-slider">Volume:</label>
            <input type="range" id="volume-slider" min="0" max="1" step="0.1" value="0.5">
            <span id="volume-value">50%</span>
    </div>

    <div id="youtube-player"></div>
    </div>

    <script>
        // Sound management
        const sounds = {
            fireworkLaunch: [
                'https://assets.mixkit.co/active_storage/sfx/212/212-preview.mp3',
                'https://assets.mixkit.co/active_storage/sfx/2021/2021-preview.mp3'
            ],
            fireworkExplode: [
                'https://assets.mixkit.co/active_storage/sfx/2774/2774-preview.mp3',
                'https://assets.mixkit.co/active_storage/sfx/530/530-preview.mp3',
                'https://assets.mixkit.co/active_storage/sfx/1647/1647-preview.mp3'
            ],
            celebration: 'https://assets.mixkit.co/active_storage/sfx/951/951-preview.mp3'
        };

        const audioElements = {};
        let globalVolume = 0.5;

        // Preload sounds
        function preloadSounds() {
            // Load launch sounds
            sounds.fireworkLaunch.forEach((src, i) => {
                audioElements[`launch${i}`] = new Audio(src);
            });
            
            // Load explosion sounds
            sounds.fireworkExplode.forEach((src, i) => {
                audioElements[`explode${i}`] = new Audio(src);
            });
            
            // Load celebration sound
            audioElements.celebration = new Audio(sounds.celebration);

            // Set initial volume for all sounds
            Object.values(audioElements).forEach(audio => {
                audio.volume = globalVolume;
            });
        }

        // Play random sound from category
        function playRandomSound(category) {
            const keys = Object.keys(audioElements).filter(key => key.startsWith(category));
            if (keys.length > 0) {
                const randomKey = keys[Math.floor(Math.random() * keys.length)];
                const audio = audioElements[randomKey];
                audio.currentTime = 0;
                audio.play().catch(e => console.log('Error playing sound:', e));
            }
        }

        // Volume control
        document.getElementById('volume-slider').addEventListener('input', function(e) {
            globalVolume = parseFloat(e.target.value);
            document.getElementById('volume-value').textContent = Math.round(globalVolume * 100) + '%';
            
            // Update all audio elements
            Object.values(audioElements).forEach(audio => {
                audio.volume = globalVolume;
            });
        });

        // Countdown timer
        function updateCountdown() {
            const now = new Date();
            const newYear = new Date(now.getFullYear() + 1, 0, 1, 0, 0, 0, 0);
            const timeRemaining = newYear - now;

            if (timeRemaining <= 0) {
                document.getElementById('countdown').textContent = "HAPPY NEW YEAR!";
                return;
            }

            const days = Math.floor(timeRemaining / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);

            document.getElementById('countdown').textContent = `${days}d ${hours}h ${minutes}m ${seconds}s until New Year!`;
        }

        // Fireworks class
        class Firework {
            constructor(canvas, ctx, x, y) {
                this.canvas = canvas;
                this.ctx = ctx;
                this.x = x;
                this.y = y;
                this.targetY = Math.random() * (canvas.height * 0.6) + canvas.height * 0.1;
                this.speed = Math.random() * 2 + 2;
                this.acceleration = 0.05;
                this.particles = [];
                this.color = this.randomColor();
                this.trail = [];
                this.isDone = false;
                this.hasExploded = false;
            }

            randomColor() {
                const colors = [
                    '#ff0000', '#ff9900', '#ffcc00', '#33cc33', 
                    '#3399ff', '#cc66ff', '#ff66cc', '#ff3366'
                ];
                return colors[Math.floor(Math.random() * colors.length)];
            }

            update() {
                // Add current position to trail
                this.trail.push({ x: this.x, y: this.y });
                if (this.trail.length > 8) {
                    this.trail.shift();
                }
                
                // Move upward with decreasing speed (gravity effect)
                if (this.y > this.targetY) {
                    this.speed -= this.acceleration;
                    this.y -= this.speed;
                    
                    // Slight horizontal drift
                    this.x += Math.random() * 2 - 1;
                } else if (!this.hasExploded) {
                    // Explode
                    this.explode();
                    this.hasExploded = true;
                }
                
                // Update particles if already exploded
                if (this.hasExploded) {
                    for (let i = 0; i < this.particles.length; i++) {
                        this.particles[i].update();
                        
                        // Remove dead particles
                        if (this.particles[i].alpha <= 0) {
                            this.particles.splice(i, 1);
                            i--;
                        }
                    }
                    
                    if (this.particles.length === 0) {
                        this.isDone = true;
                    }
                }
            }

            explode() {
                const particleCount = Math.floor(Math.random() * 50) + 50;
                const angleIncrement = (Math.PI * 2) / particleCount;
                const explosionType = Math.floor(Math.random() * 4);
                
                // Play explosion sound
                playRandomSound('explode');
                
                for (let i = 0; i < particleCount; i++) {
                    let angle = angleIncrement * i;
                    let velocity = Math.random() * 2 + 2;
                    
                    if (explosionType === 0) { // Circle
                        this.particles.push(new Particle(
                            this.x,
                            this.y,
                            velocity * Math.cos(angle),
                            velocity * Math.sin(angle),
                            this.color,
                            this.ctx
                        ));
                    } else if (explosionType === 1) { // Heart
                        const t = angle;
                        const heartX = 16 * Math.pow(Math.sin(t), 3);
                        const heartY = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
                        this.particles.push(new Particle(
                            this.x,
                            this.y,
                            velocity * 0.2 * heartX,
                            velocity * 0.2 * heartY,
                            this.color,
                            this.ctx
                        ));
                    } else if (explosionType === 2) { // Spiral
                        this.particles.push(new Particle(
                            this.x,
                            this.y,
                            velocity * Math.cos(angle * 3),
                            velocity * Math.sin(angle),
                            this.color,
                            this.ctx
                        ));
                    } else { // Starburst
                        const burstVelocity = i % 2 === 0 ? velocity * 1.5 : velocity * 0.8;
                        this.particles.push(new Particle(
                            this.x,
                            this.y,
                            burstVelocity * Math.cos(angle),
                            burstVelocity * Math.sin(angle),
                            this.color,
                            this.ctx
                        ));
                    }
                }
            }

            draw() {
                if (!this.hasExploded) {
                    // Draw trail
                    for (let i = 0; i < this.trail.length; i++) {
                        const alpha = i / this.trail.length;
                        this.ctx.beginPath();
                        this.ctx.arc(this.trail[i].x, this.trail[i].y, 2 * alpha, 0, Math.PI * 2);
                        this.ctx.fillStyle = `rgba(255, 220, 180, ${alpha})`;
                        this.ctx.fill();
                    }
                    
                    // Draw firework
                    this.ctx.beginPath();
                    this.ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
                    this.ctx.fillStyle = this.color;
                    this.ctx.fill();
                    
                    // Glow effect
                    this.ctx.beginPath();
                    this.ctx.arc(this.x, this.y, 6, 0, Math.PI * 2);
                    this.ctx.fillStyle = `rgba(255, 255, 255, 0.3)`;
                    this.ctx.fill();
                } else {
                    // Draw particles
                    for (const particle of this.particles) {
                        particle.draw();
                    }
                }
            }
        }

        class Particle {
            constructor(x, y, velocityX, velocityY, color, ctx) {
                this.x = x;
                this.y = y;
                this.initialX = x;
                this.initialY = y;
                this.velocityX = velocityX;
                this.velocityY = velocityY;
                this.color = color;
                this.ctx = ctx;
                this.alpha = 1;
                this.decay = Math.random() * 0.03 + 0.005;
                this.gravity = 0.1;
                this.size = Math.random() * 3 + 1;
                this.trail = [];
            }

            update() {
                // Add current position to trail with limit
                this.trail.push({ x: this.x, y: this.y, alpha: this.alpha });
                if (this.trail.length > 5) {
                    this.trail.shift();
                }
                
                // Apply gravity
                this.velocityY += this.gravity;
                
                // Slow down over time
                this.velocityX *= 0.98;
                this.velocityY *= 0.98;
                
                // Move
                this.x += this.velocityX;
                this.y += this.velocityY;
                
                // Fade out
                this.alpha -= this.decay;
            }

            draw() {
                // Draw trail
                for (let i = 0; i < this.trail.length; i++) {
                    const point = this.trail[i];
                    this.ctx.beginPath();
                    this.ctx.arc(point.x, point.y, this.size * (i / this.trail.length), 0, Math.PI * 2);
                    this.ctx.fillStyle = `rgba(${this.hexToRgb(this.color)}, ${point.alpha * 0.7})`;
                    this.ctx.fill();
                }
                
                // Draw particle
                this.ctx.save();
                this.ctx.globalCompositeOperation = 'lighter';
                
                this.ctx.beginPath();
                this.ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                this.ctx.fillStyle = `rgba(${this.hexToRgb(this.color)}, ${this.alpha})`;
                this.ctx.fill();
                
                // Add glow effect
                this.ctx.beginPath();
                this.ctx.arc(this.x, this.y, this.size * 2, 0, Math.PI * 2);
                this.ctx.fillStyle = `rgba(${this.hexToRgb(this.color)}, ${this.alpha * 0.3})`;
                this.ctx.fill();
                
                this.ctx.restore();
            }
            
            hexToRgb(hex) {
                // Convert hex to RGB
                const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                if (result) {
                    const r = parseInt(result[1], 16);
                    const g = parseInt(result[2], 16);
                    const b = parseInt(result[3], 16);
                    return `${r}, ${g}, ${b}`;
                }
                return '255, 255, 255'; // Default to white
            }
        }

        // Fireworks controller
        let fireworks = [];
        let fireworksInterval;
        let isFireworksRunning = false;
        let canvas, ctx;

        function setupFireworks() {
            canvas = document.getElementById('fireworks-canvas');
            ctx = canvas.getContext('2d');
            
            // Set canvas to full window size
            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
        }
        
        function animate() {
            // Semi-transparent black background for trail effect
            ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Update and draw all fireworks
            for (let i = 0; i < fireworks.length; i++) {
                fireworks[i].update();
                fireworks[i].draw();
                
                // Remove finished fireworks
                if (fireworks[i].isDone) {
                    fireworks.splice(i, 1);
                    i--;
                }
            }
            
            // Continue animation
            if (isFireworksRunning) {
                requestAnimationFrame(animate);
            }
        }

        function createFirework() {
            const x = Math.random() * canvas.width;
            const y = canvas.height;
            fireworks.push(new Firework(canvas, ctx, x, y));
            
            // Play launch sound
            playRandomSound('launch');
        }

        function startFireworks() {
            if (isFireworksRunning) return;
            
            // Play celebration sound
            if (audioElements.celebration) {
                audioElements.celebration.play().catch(e => console.log('Error playing celebration sound:', e));
            }
            
            isFireworksRunning = true;
            
            // Start animation
            animate();
            
            // Launch fireworks at random intervals
            fireworksInterval = setInterval(() => {
                // Create 1-3 fireworks at once
                const count = Math.floor(Math.random() * 3) + 1;
                for (let i = 0; i < count; i++) {
                    setTimeout(() => createFirework(), i * 200);
                }
            }, 800);
            
            // Stop fireworks after 25 seconds and show YouTube video
            setTimeout(() => {
                isFireworksRunning = false;
                clearInterval(fireworksInterval);

                // Clear canvas with fade effect
                const fadeInterval = setInterval(() => {
                    ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    
                    // Check if there are still fireworks to draw
                    if (fireworks.length === 0) {
                        clearInterval(fadeInterval);
                    }
                }, 100);
                
                // Show YouTube video
                const youtubePlayer = document.getElementById('youtube-player');
                youtubePlayer.style.display = 'block';
                youtubePlayer.innerHTML = '<iframe width="640" height="360" src="https://www.youtube.com/embed/rWwhteesVhA?autoplay=1" frameborder="0" allowfullscreen></iframe>';
            }, 25000);
        }

        function openNSFWLink() {
            window.open('https://matias.ma/nsfw/', '_blank');
        }

        // Initialize
        window.onload = function() {
            preloadSounds();
            setupFireworks();
            setInterval(updateCountdown, 1000);
            updateCountdown();
        };
    </script>
</body>
</html> 